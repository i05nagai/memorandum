---
title: MySQL
---

## MySQL
Syntax


## 5.7
[MySQL :: MySQL 5\.7 Reference Manual :: 12 Functions and Operators](https://dev.mysql.com/doc/refman/5.7/en/functions.html)

You cannot self-join table generated by a subquery.

Rank

```sql
SELECT
  e.Salary,
  CASE
    WHEN @prev_value = e.Salary THEN @rank_count
      WHEN @prev_value := e.Salary THEN @rank_count := @rank_count + 1
    WHEN e.Salary = 0 THEN  @rank_count := @rank_count + 1
  END AS _rank
FROM 
  (SELECT @prev_value := NULL, @rank_count := 0) AS t,
  Employee AS e
ORDER BY e.Salary DESC
```

## Window functions
Available since 8.0.

* `null_treatment` clause
    * specifies how to handle NULL values when calculating results.
    * This clause is optional.
    * `RESPECT NULLS`
    * `IGNORE NULLS`
        * not implemented in MySQL
    * null_treatment is nothign

```
over_clause:
    {OVER (window_spec) | OVER window_name}
```

* `LAG(expr [, N[, default]]) [null_treatment] over_clause`


```sql
SELECT
    t,
    val,
    LAG(val)        OVER w AS 'lag',
    LEAD(val)       OVER w AS 'lead',
    val - LAG(val)  OVER w AS 'lag diff',
    val - LEAD(val) OVER w AS 'lead diff'
FROM series
WINDOW w AS (ORDER BY t);
```


## Reference
* [MySQL Syntax Check](https://www.piliapp.com/mysql-syntax-check/)
